<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" />
    <title>Basic &lt;mux-video/&gt; example</title>
    <script type="module" src="./dist/mux-video.js"></script>
    <style>
      media-controller {
        --media-aspect-ratio: auto;
        --media-control-background: transparent;
        --media-control-hover-background: transparent;
        --media-range-track-background-color: rgba(255, 255, 255, 0.5);
        --media-range-track-border-radius: 3px;
        --media-aspect-ratio: auto;
        display: inline-block;
        width: auto;
        height: auto;
      }

      media-controller::part(media-layer) {
        /* "reset" current styles for media-layer */
        position: initial;
        top: initial;
        left: initial;
        bottom: initial;
        right: initial;
        flex-flow: initial;
        align-items: initial;
        /* end of "reset" current styles for media-layer */
        display: contents;
      }

      media-controller :is(mux-video, media-poster-image) {
        min-width: 100%;
        min-height: 100%;
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
      }
    </style>
  </head>
  <body>
    <div>
      <media-controller>
        <mux-video
          id="media"
          slot="media"
          stream-type="on-demand"
          muted
          controls
        ></mux-video>
      </media-controller>
    </div>
    <div>
      <label for="playbackIdInput">Playback Id</label>
      <input id="playbackIdInput" type="text"/>
      <label for="widthInput">Width</label>
      <input id="widthInput" type="text"/>
      <label for="heightInput">Height</label>
      <input id="heightInput" type="text"/>
    </div>

   <script>
     const params = new URLSearchParams(window.location.search);
     const mediaEl = document.querySelector('#media');
     const mcEl = document.querySelector('media-controller');

     const playbackIdInput = document.querySelector('#playbackIdInput');
     playbackIdInput.addEventListener('change', () => {
       if (mediaEl.getAttribute('playback-id') !== playbackIdInput.value) {
         mediaEl.setAttribute('playback-id', playbackIdInput.value);
       }
     });
     if (params.has('playback-id')) {
       playbackIdInput.value = params.get('playback-id');
       if (mediaEl.getAttribute('playback-id') !== playbackIdInput.value) {
         mediaEl.setAttribute('playback-id', playbackIdInput.value);
       }
     }

     const widthInput = document.querySelector('#widthInput');
     widthInput.addEventListener('change', () => {
       if (mcEl.style.width !== widthInput.value) {
        mcEl.style.width = widthInput.value;
       }
     });
     if (params.has('width')) {
       widthInput.value = params.get('width');
       if (mcEl.style.width !== widthInput.value) {
        mcEl.style.width = widthInput.value;
       }
     }

     const heightInput = document.querySelector('#heightInput');
     heightInput.addEventListener('change', () => {
       if (mcEl.style.height !== heightInput.value) {
        mcEl.style.height = heightInput.value;
       }
     });

     if (params.has('height')) {
       heightInput.value = params.get('height');
       if (mcEl.style.height !== heightInput.value) {
        mcEl.style.height = heightInput.value;
       }
     }
     
   </script>
    <a href="../">Browse Elements</a>
  </body>
</html>
